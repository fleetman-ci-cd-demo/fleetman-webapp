{"version":3,"sources":["webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/header/header.component.css","webpack:///./src/app/header/header.component.html","webpack:///./src/app/header/header.component.ts","webpack:///./src/app/map/map.component.css","webpack:///./src/app/map/map.component.html","webpack:///./src/app/map/map.component.ts","webpack:///./src/app/vehicle.service.ts","webpack:///./src/app/vehicle.ts","webpack:///./src/app/vehicles/vehicles.component.css","webpack:///./src/app/vehicles/vehicles.component.html","webpack:///./src/app/vehicles/vehicles.component.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error('Cannot find module \"' + req + '\".');\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","module.exports = \"\"","module.exports = \"\\n\\n<div id=\\\"container\\\">\\n  <app-header></app-header>\\n  <div id=\\\"sidebar\\\">\\n    <div class=\\\"sidebar-wrapper\\\">\\n        <div class=\\\"sidebar-table\\\">\\n          <app-vehicles></app-vehicles>\\n        </div>\\n    </div>\\n  </div>\\n\\n  <app-map></app-map>\\n</div>\\n\"","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'Fleetman Live Tracking';\n}\n","\nimport { BrowserModule } from '@angular/platform-browser';\nimport { NgModule, Inject } from '@angular/core';\n\nimport { AppComponent } from './app.component';\nimport { VehiclesComponent } from './vehicles/vehicles.component';\nimport { VehicleService } from './vehicle.service';\n\nimport { HttpClientModule }    from '@angular/common/http';\nimport { MapComponent } from './map/map.component';\n\nimport { LeafletModule } from '@asymmetrik/ngx-leaflet';\n\nimport {StompConfig, StompService} from '@stomp/ng2-stompjs';\nimport { HeaderComponent } from './header/header.component';\n\nimport {NgbModule} from '@ng-bootstrap/ng-bootstrap';\n\nimport { DOCUMENT } from '@angular/platform-browser';\n\nconst stompConfig: StompConfig = {\n     url: \"ws://\" + window.location.hostname + \":\" + window.location.port + \"/api/updates\",\n     // TODO will reinstate when dev complete.\n     headers: {\n     },\n     heartbeat_in: 0, // Typical value 0 - disabled\n     heartbeat_out: 20000, // Typical value 20000 - every 20 seconds\n     reconnect_delay: 5000,\n     debug: true\n};\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    VehiclesComponent,\n    MapComponent,\n    HeaderComponent\n  ],\n  imports: [\n    BrowserModule,\n    HttpClientModule,\n    LeafletModule.forRoot(),\n    NgbModule.forRoot()\n  ],\n  providers: [VehicleService,\n              StompService,\n              {\n                 provide: StompConfig,\n                 useValue: stompConfig\n              }],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {\n}\n","module.exports = \"\"","module.exports = \"<nav class=\\\"navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-1\\\">\\n  <a class=\\\"navbar-brand col-sm-3 col-md-2 mr-0\\\" href=\\\"#\\\">Fleet Management System R2</a>\\n  <ul class=\\\"navbar-nav flex-row\\\">\\n    <li class=\\\"nav-item\\\">\\n      <a class=\\\"nav-link p-2\\\" href=\\\"https://github.com/DickChesterwood/k8s-fleetman\\\"><span class=\\\"fa fa-2x fa-github\\\"></span></a>\\n    </li>\\n    <li>\\n      <a class=\\\"nav-link p-2\\\" href=\\\"https://twitter.com/RichChesterwood\\\"><span class=\\\"fa fa-2x fa-twitter\\\"></span></a>\\n    </li>\\n    <li>\\n      <a class=\\\"nav-link p-2\\\" href=\\\"http://blog.chesterwood.io\\\"><span class=\\\"fa fa-2x fa-rss\\\"></span></a>\\n    </li>\\n  </ul>\\n</nav>\\n\"","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.css']\n})\nexport class HeaderComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","module.exports = \"\"","module.exports = \"<div id=\\\"mapid\\\"\\n      leaflet\\n     [leafletOptions]=\\\"options\\\"\\n     (leafletMapReady)=\\\"onMapReady($event)\\\"     \\n     [leafletLayers]=\\\"markers\\\">\\n</div>\\n\"","import { Component, OnInit } from '@angular/core';\nimport { LeafletModule } from '@asymmetrik/ngx-leaflet';\nimport { icon, latLng, Layer, Marker, marker, tileLayer, Map, point, polyline } from 'leaflet';\n\nimport { VehicleService } from '../vehicle.service';\nimport { Vehicle } from '../vehicle';\n\n@Component({\n  selector: 'app-map',\n  templateUrl: './map.component.html',\n  styleUrls: ['./map.component.css']\n})\nexport class MapComponent implements OnInit {\n\n  constructor(private vehicleService: VehicleService) { }\n\n  markers: Marker[] = [];\n  map: Map;\n  centerVehicle: string;\n  selectedVehicleHistory;\n\n  options = {\n    layers: [\n       tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n                  { maxZoom: 18,\n                    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n                  })\n    ],\n    zoom: 16,\n    center: latLng(53.375564, -1.506785)\n  };\n\n  onMapReady(map: Map) {\n    this.map = map;\n  }\n\n  ngOnInit() {\n    this.vehicleService.subscription.subscribe(vehicle => {\n       if (vehicle == null) return;\n       let foundIndex = this.markers.findIndex(existingMarker => existingMarker.options['title'] == vehicle.name);\n\n       if (foundIndex == -1)\n       {\n         let newMarker = marker([vehicle.lat,vehicle.lng] ,\n                                 {\n                                   icon: icon( {\n                                                 iconSize: [ 25, 41 ],\n                                                 iconAnchor: [ 11, 41 ],\n                                                 iconUrl: 'assets/marker-icon.png',\n                                                 shadowUrl: 'assets/marker-shadow.png'\n                                               }),\n                                   title: vehicle.name\n                                 }).bindTooltip(vehicle.name, {permanent:true,  offset: point({x: 0, y: 0})});\n         this.markers.push(newMarker);\n       }\n       else\n       {\n        this.markers[foundIndex].setLatLng(latLng(vehicle.lat, vehicle.lng));\n       }\n       if (this.centerVehicle == vehicle.name) {\n         //this.map.setView([vehicle.lat,vehicle.lng],\n        //                   this.map.getZoom(), {\"animate\": true});\n         this.selectedVehicleHistory.addLatLng(latLng(vehicle.lat, vehicle.lng));\n       }\n     });\n\n     this.vehicleService.centerVehicle.subscribe(vehicle => {\n       if (vehicle == null)\n       {\n         this.centerVehicle = null;\n         return;\n       }\n       this.centerVehicle = vehicle.name;\n       this.map.flyTo([vehicle.lat,vehicle.lng],\n                         this.map.getZoom(), {\n       \t\t\t\t   \t       \"animate\": true\n       \t\t\t\t  });\n     });\n\n     this.vehicleService.centerVehicleHistory.subscribe(newHistory => {\n       if (this.selectedVehicleHistory != null) this.selectedVehicleHistory.remove(this.map);\n       if (newHistory ==null) return;\n       this.selectedVehicleHistory = polyline(newHistory, {weight:10, opacity:0.5, color:'red'});\n       this.selectedVehicleHistory.addTo(this.map);\n     });\n   }\n}\n","import { Injectable } from '@angular/core';\nimport { Vehicle } from './vehicle';\nimport { Observable ,  Subscription, BehaviorSubject ,  of } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport { catchError, map, tap } from 'rxjs/operators';\n\nimport {Message} from '@stomp/stompjs';\nimport {StompService} from '@stomp/ng2-stompjs';\n\nimport {  LatLng } from 'leaflet';\n\n@Injectable()\nexport class VehicleService  {\n\n  subscription: BehaviorSubject<Vehicle>;\n  centerVehicle: BehaviorSubject<Vehicle>;\n  centerVehicleHistory: BehaviorSubject<any>;\n\n  constructor(private _stompService: StompService, private http: HttpClient) {\n    // Store local reference to Observable\n    // for use with template ( | async )\n    this.subscribe();\n    this.subscription = new BehaviorSubject(null);\n    this.centerVehicle = new BehaviorSubject(null);\n    this.centerVehicleHistory = new BehaviorSubject(null);\n  }\n\n  subscribe() {\n    // Stream of messages\n    var messages = this._stompService.subscribe('/vehiclepositions/messages');\n    // Subscribe a function to be run on_next message\n    messages.subscribe(this.onMessage);\n  }\n\n  /** Consume a message from the _stompService */\n  onMessage = (message: Message) => {\n\n    let body = JSON.parse(message.body);\n\n    // update vehicle and notify\n    let newVehicle = new Vehicle(body.name,\n                                 Number(body.lat),\n                                 Number(body.longitude),\n                                 body.timestamp,\n                                Number(body.speed));\n    this.subscription.next(newVehicle);\n  }\n\n  updateCenterVehicle(centerVehicle: Vehicle) {\n    this.centerVehicle.next(centerVehicle);\n\n    if (centerVehicle == null)\n    {\n      this.centerVehicleHistory.next(null);\n    }\n    else\n    {\n      // call API gateway, get the history for this vehicle.\n      this.http.get(\"http://\" + window.location.hostname + \":\" + window.location.port + \"/api/history/\" + centerVehicle.name)\n             .subscribe( data => this.centerVehicleHistory.next(data));\n    }\n  }\n}\n","export class Vehicle {\r\n  name: string;\r\n  lat: number;\r\n  lng: number;\r\n  dateAndTime: string;\r\n  speed: number;\r\n\r\n  constructor(name: string, lat:number, lng:number, dateAndTime:string, speed: number) {\r\n    this.name = name;\r\n    this.lat = lat;\r\n    this.lng = lng;\r\n    this.dateAndTime = dateAndTime;\r\n    this.speed = speed;\r\n  }\r\n\r\n}\r\n","module.exports = \"table {\\r\\n  border-bottom: 1px solid silver;\\r\\n}\\r\\n\"","module.exports = \"\\n  <table class=\\\"table table-responsive table-hover table-condensed\\\">\\n    <thead class=\\\".thead-dark\\\">\\n      <tr>\\n        <th scope=\\\"col\\\">Name</th>\\n        <th scope=\\\"col\\\">Last seen</th>\\n        <th scope=\\\"col\\\">Speed mph</th>\\n      </tr>\\n    </thead>\\n    <tbody>\\n      <tr *ngFor=\\\"let vehicle of vehicles\\\"  (click)=\\\"centerVehicle(vehicle)\\\"\\n          [class.table-info]=\\\"vehicle.name === centeredVehicle\\\"  style=\\\"cursor:pointer\\\">\\n        <th scope=\\\"row\\\"><span class=\\\"fa fa-truck\\\"></span>{{vehicle.name}}</th>\\n        <td>{{vehicle.dateAndTime | date:'HH:mm:ss'}}</td>\\n        <td>{{vehicle.speed | number:'0.0-0'}}</td>\\n      </tr>\\n    </tbody>\\n  </table>\\n\"","import { Component, OnInit } from '@angular/core';\nimport { Vehicle } from '../vehicle';\nimport { VehicleService } from '../vehicle.service';\n\n@Component({\n  selector: 'app-vehicles',\n  templateUrl: './vehicles.component.html',\n  styleUrls: ['./vehicles.component.css']\n})\nexport class VehiclesComponent implements OnInit {\n\n  vehicles: Vehicle[] = [];\n  centeredVehicle: string;\n\n  constructor(private vehicleService: VehicleService) { }\n\n  ngOnInit() {\n    this.vehicleService.subscription.subscribe(updatedVehicle => {\n      if (updatedVehicle==null) return;\n      let foundIndex = this.vehicles.findIndex(existingVehicle => existingVehicle.name == updatedVehicle.name);\n      if (foundIndex == -1)\n      {\n        this.vehicles.push(updatedVehicle);\n        this.vehicles.sort( (a:Vehicle,b:Vehicle) => {\n          return (a.name < b.name) ? -1 : 1;\n        });\n      }\n      else\n      {\n        this.vehicles[foundIndex] = updatedVehicle;\n      }\n    });\n  }\n\n  centerVehicle(vehicle: Vehicle) {\n    // allow to \"deselect\"\n    if (this.centeredVehicle == vehicle.name)\n    {\n      this.centeredVehicle = null\n      this.vehicleService.updateCenterVehicle(null);\n    }\n    else\n    {\n      this.centeredVehicle = vehicle.name;\n      this.vehicleService.updateCenterVehicle(vehicle);\n    }\n  }\n\n}\n","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n"],"sourceRoot":""}